<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sober Day Tracker</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            text-align: center;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Landing Page */
        .landing-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex: 1;
        }

        /* Header Section */
        .header {
            background-color: #7C4DFF; /* Example color */
            color: white;
            padding: 20px;
            position: relative;
        }

        .header h1 {
            font-size: 24px;
            margin: 0;
        }

        .header p {
            font-size: 14px;
            margin: 5px 0;
        }

        /* Input Form Styling */
        .input-form {
            margin: 20px;
        }

        .input-form input {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
            width: 250px;
            font-size: 16px;
        }

        .input-form button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
        }

        .input-form button:hover {
            background-color: #45a049;
        }

        /* Main Title */
        .main-title {
            font-size: 32px;
            margin: 20px 0;
            color: #333;
        }

        /* Recovery Duration Section */
        .recovery-duration {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }

        .duration-card {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin: 0 10px;
            flex: 1;
        }

        .duration-card h2 {
            font-size: 24px;
            margin: 0;
        }

        /* Rewards Section */
        .rewards {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin: 20px;
        }

        .rewards h2 {
            font-size: 24px;
        }

        .rewards .amount {
            font-size: 36px;
            color: #4CAF50;
        }

        /* Navigation Bar */
        .nav-bar {
            display: flex;
            justify-content: space-around;
            background-color: #7C4DFF;
            padding: 10px 0;
            position: absolute;
            bottom: 0;
            width: 100%;
        }

        .nav-bar a {
            color: white;
            text-decoration: none;
            font-size: 16px;
        }

        /* Milestones Section */
        .milestones {
            margin: 20px;
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .milestones h2 {
            font-size: 24px;
        }

        .milestones button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }

        .milestones button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

    <!-- Landing Page -->
    <div class="landing-page" id="landingPage">
        <h1>Sober Tracker</h1>
        <div class="input-form">
            <input type="text" id="userNameInput" placeholder="Enter your name" />
            <input type="date" id="sobrietyDateInput" placeholder="Sobriety Start Date" />
            <button onclick="saveUserData()">Start Tracking</button>
        </div>
    </div>

    <!-- Header Section -->
    <div class="header" id="header" style="display: none;">
        <h1 class="main-title">Sobriety Tracker</h1>
        <h2 id="userName">Welcome!</h2>
        <p id="sobrietyDate">Start Date: N/A</p>
        <p class="challenge" id="currentMilestone">Current Milestone: N/A</p>
        <p id="nextMilestone">Next Milestone: N/A</p>
    </div>

    <!-- Recovery Duration Section -->
    <div class="recovery-duration" id="recoveryDuration" style="display: none;">
        <div class="duration-card">
            <h2 id="years">0 Years</h2>
        </div>
        <div class="duration-card">
            <h2 id="months">0 Months</h2>
        </div>
        <div class="duration-card">
            <h2 id="days">0 Days</h2>
        </div>
    </div>

    <!-- Rewards Section -->
    <div class="rewards" id="rewards" style="display: none;">
        <h2>Rewards Earned</h2>
        <div class="amount" id="rewardAmount">$200 Earned so far</div>
    </div>

    <!-- Milestones Section -->
    <div class="milestones" id="milestones" style="display: none;">
        <h2>Next Milestone</h2>
        <button onclick="checkIn()">Earn milestones by checking in!</button>
    </div>

    <!-- Navigation Bar -->
    <div class="nav-bar" id="navBar" style="display: none;">
        <a href="#">My Day</a>
        <a href="#">Online</a>
        <a href="#">Messages</a>
    </div>

    <script>
        // Function to save user data
        function saveUserData() {
            const name = document.getElementById('userNameInput').value;
            const sobrietyDate = document.getElementById('sobrietyDateInput').value;

            if (name && sobrietyDate) {
                localStorage.setItem('userName', name);
                localStorage.setItem('sobrietyStartDate', sobrietyDate);
                updateUI(name, new Date(sobrietyDate));
            } else {
                alert("Please provide valid inputs.");
            }
        }

        // Function to update the UI with user's information
        function updateUI(name, sobrietyStartDate) {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('header').style.display = 'block';
            document.getElementById('recoveryDuration').style.display = 'flex';
            document.getElementById('rewards').style.display = 'block';
            document.getElementById('milestones').style.display = 'block';
            document.getElementById('navBar').style.display = 'flex';

            document.getElementById('userName').innerText = "Welcome " + name + "!";
            document.getElementById('sobrietyDate').innerText = "Start Date: " + sobrietyStartDate.toDateString();

            calculateSoberTime(sobrietyStartDate);
        }

        // Check if the user has already set their name and sobriety date
        window.onload = function() {
            const storedName = localStorage.getItem('userName');
            const storedDate = localStorage.getItem('sobrietyStartDate');

            if (storedName && storedDate) {
                updateUI(storedName, new Date(storedDate));
            }
        };

        // Function to calculate and display the sober time in years, months, and days
        function calculateSoberTime(sobrietyStartDate) {
            const today = new Date();
            let years = today.getFullYear() - sobrietyStartDate.getFullYear();
            let months = today.getMonth() - sobrietyStartDate.getMonth();
            let days = today.getDate() - sobrietyStartDate.getDate();

            // Adjust if days or months are negative
            if (days < 0) {
                months -= 1;
                const daysInLastMonth = new Date(today.getFullYear(), today.getMonth(), 0).getDate();
                days += daysInLastMonth;
            }

            if (months < 0) {
                years -= 1;
                months += 12;
            }

            // Update UI with the sober time
            document.getElementById('years').innerText = years + " Year" + (years !== 1 ? "s" : "");
            document.getElementById('months').innerText = months + " Month" + (months !== 1 ? "s" : "");
            document.getElementById('days').innerText = days + " Day" + (days !== 1 ? "s" : "");

            // Update current and next milestone
            updateMilestones(years, months, days);
        }

        // Function to update milestones
        function updateMilestones(years, months, days) {
            const totalDays = years * 365 + months * 30 + days; // Approximation for days
            let currentMilestone;
            let nextMilestone;

            if (totalDays >= 365 * 10) {
                currentMilestone = "10 Years";
                nextMilestone = "10+ Years";
            } else if (totalDays >= 365 * 5) {
                currentMilestone = "5 Years";
                nextMilestone = "10 Years";
            } else if (totalDays >= 365 * 2) {
                currentMilestone = "2 Years";
                nextMilestone = "5 Years";
            } else if (totalDays >= 365) {
                currentMilestone = "1 Year";
                nextMilestone = "2 Years";
            } else if (totalDays >= 183) {
                currentMilestone = "6 Months";
                nextMilestone = "1 Year";
            } else if (totalDays >= 30) {
                currentMilestone = "1 Month";
                nextMilestone = "6 Months";
            } else if (totalDays >= 7) {
                currentMilestone = "1 Week";
                nextMilestone = "1 Month";
            } else {
                currentMilestone = "1 Day";
                nextMilestone = "1 Week";
            }

            document.getElementById('currentMilestone').innerText = "Current Milestone: " + currentMilestone;
            document.getElementById('nextMilestone').innerText = "Next Milestone: " + nextMilestone;
        }

        // Function for checking in
        function checkIn() {
            alert("You have checked in for today!");
            // Additional functionality for checking in can be added here
        }
    </script>

</body>
</html>
